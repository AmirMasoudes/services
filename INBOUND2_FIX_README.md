# ุญู ูุดฺฉู Async Context ู ุชุณุช Inbound 2

## ๐ ูุดฺฉู ฺุณุชุ

ุฎุทุง `You cannot call this from an async context - use a thread or synctoasync` ุฒูุงู ุฑุฎ ูโุฏูุฏ ฺฉู ุณุน ูโฺฉูุฏ ุนููุงุช Django ORM (ฺฉู sync ูุณุชูุฏ) ุฑุง ุงุฒ ฺฉ context async ูุฑุงุฎูุงู ฺฉูุฏ.

## โ ุฑุงู ุญู ุงุนูุงู ุดุฏู

### 1. ุงุถุงูู ฺฉุฑุฏู ูุชุฏูุง Sync

ุฏุฑ ูุงู `xui_servers/enhanced_api_models.py` ูุชุฏูุง sync ุฒุฑ ุงุถุงูู ุดุฏูโุงูุฏ:

- `create_trial_config_sync()` - ุงุฌุงุฏ ฺฉุงููฺฏ ุชุณุช ุจุฏูู async
- `create_user_config_sync()` - ุงุฌุงุฏ ฺฉุงููฺฏ ฺฉุงุฑุจุฑ ุจุฏูู async

### 2. ุงุณุชูุงุฏู ุงุฒ Sync Methods

ุจู ุฌุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏูุง asyncุ ูโุชูุงูุฏ ุงุฒ ูุชุฏูุง sync ุงุณุชูุงุฏู ฺฉูุฏ:

```python
# โ ูุจู ุงุฒ ุญู ูุดฺฉู (async)
user_config = await client_manager.create_trial_config_async(user, inbound)

# โ ุจุนุฏ ุงุฒ ุญู ูุดฺฉู (sync)
user_config = client_manager.create_trial_config_sync(user, inbound)
```

## ๐งช ุชุณุช Inbound 2

### ูุงู ุชุณุช ุณุงุฏู

ูุงู `simple_inbound2_test.py` ุจุฑุง ุชุณุช ุณุฑุน ุงุฌุงุฏ ุดุฏู ุงุณุช:

```bash
python simple_inbound2_test.py
```

### ูุงู ุชุณุช ฺฉุงูู

ูุงู `test_inbound2_trial.py` ุจุฑุง ุชุณุช ุฌุงูุน ุงุฌุงุฏ ุดุฏู ุงุณุช:

```bash
python test_inbound2_trial.py
```

## ๐ ูุฑุงุญู ุชุณุช

### 1. ุชุณุช ุงุชุตุงู ุจู Inbound 2
- ุจุฑุฑุณ ุงุชุตุงู ุจู ุณุฑูุฑ X-UI
- ุฏุฑุงูุช ูุณุช inbound ูุง
- ุงูุชู inbound ุจุง ID 2

### 2. ุชุณุช ุงุฌุงุฏ ฺฉุงููฺฏ ุชุณุช
- ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุชุณุช
- ุงุฌุงุฏ ฺฉุงููฺฏ ุชุณุช ุจุง ุฑูุด sync
- ุจุฑุฑุณ ุฐุฎุฑู ุฏุฑ ุฏุชุงุจุณ
- ูพุงฺฉุณุงุฒ ุฏุงุฏูโูุง ุชุณุช

## ๐ง ูุญูู ุงุณุชูุงุฏู ุฏุฑ ฺฉุฏ

### ุฏุฑ Telegram Bot

```python
# ุจู ุฌุง async method
# user_config = await client_manager.create_trial_config_async(user, inbound)

# ุงุฒ sync method ุงุณุชูุงุฏู ฺฉูุฏ
user_config = client_manager.create_trial_config_sync(user, inbound)
```

### ุฏุฑ Django Views

```python
# ุฏุฑ view ูุง sync
def create_trial_config(request):
    client_manager = XUIClientManager(server)
    user_config = client_manager.create_trial_config_sync(user, inbound)
    # ...
```

## ๐ ูุชุงุฌ ููุฑุฏ ุงูุชุธุงุฑ

ูพุณ ุงุฒ ุงุฌุฑุง ุชุณุชโูุง ุจุงุฏ ูพุงูโูุง ุฒุฑ ุฑุง ุจุจูุฏ:

```
๐ฏ ุชุณุช Inbound 2 ู ุญู ูุดฺฉู async context
==================================================
๐ง ุชูุธู ูุญุท ุชุณุช...
โ ุณุฑูุฑ ุงูุช ุดุฏ: [ูุงู ุณุฑูุฑ]
โ Inbound 2 ุงูุช ุดุฏ: [ูุงู Inbound]

๐งช ุชุณุช ุงุฌุงุฏ ฺฉุงููฺฏ ุชุณุช...
๐ ุชุณุช ุงุฌุงุฏ ฺฉุงููฺฏ ุจุง ุฑูุด sync...
โ ฺฉุงููฺฏ ุชุณุช ุจุง ููููุช ุงุฌุงุฏ ุดุฏ!
   ๐ ูุงู: [ูุงู ฺฉุงุฑุจุฑ] - ุชุณุช
   ๐ง ูพุฑูุชฺฉู: vless
   โฐ ุงููุถุง: [ุชุงุฑุฎ ุงููุถุง]
   ๐ X-UI User ID: [ุดูุงุณู]

๐ ูุชุงุฌ ุชุณุชโูุง:
------------------------------
ุงุชุตุงู ุจู Inbound 2: โ ูููู
ุงุฌุงุฏ ฺฉุงููฺฏ ุชุณุช: โ ูููู

๐ ุชูุงู ุชุณุชโูุง ุจุง ููููุช ุงูุฌุงู ุดุฏ!
โ ูุดฺฉูุงุช async context ุญู ุดุฏ
โ Inbound 2 ูุงุจู ุงุณุชูุงุฏู ุงุณุช
โ ฺฉุงููฺฏ ุชุณุช ูุงุจู ุงุฌุงุฏ ุงุณุช
```

## โ๏ธ ูฺฉุงุช ููู

1. **ูุชุฏูุง Sync**: ููุดู ุงุฒ ูุชุฏูุง `_sync` ุงุณุชูุงุฏู ฺฉูุฏ ูฺฏุฑ ุงูฺฉู ูุงูุนุงู ูุงุฒ ุจู async ุฏุงุดุชู ุจุงุดุฏ
2. **ูพุงฺฉุณุงุฒ**: ุชุณุชโูุง ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุฏุงุฏูโูุง ุชุณุช ุฑุง ูพุงฺฉ ูโฺฉููุฏ
3. **ุณุฑูุฑ ูุนุงู**: ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุญุฏุงูู ฺฉ ุณุฑูุฑ X-UI ูุนุงู ุฏุฑ ุฏุชุงุจุณ ูุฌูุฏ ุฏุงุฑุฏ
4. **Inbound 2**: ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู inbound ุจุง ID 2 ุฏุฑ X-UI ูุฌูุฏ ุฏุงุฑุฏ

## ๐ ุงุฌุฑุง ุณุฑุน

ุจุฑุง ุชุณุช ุณุฑุน:

```bash
cd /path/to/your/project
python simple_inbound2_test.py
```

ุจุฑุง ุชุณุช ฺฉุงูู:

```bash
python test_inbound2_trial.py
```

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:

1. ุจุฑุฑุณ ูุงฺฏโูุง Django
2. ุจุฑุฑุณ ุงุชุตุงู ุจู ุณุฑูุฑ X-UI
3. ุจุฑุฑุณ ูุฌูุฏ inbound ุจุง ID 2
4. ุจุฑุฑุณ ุชูุธูุงุช ุณุฑูุฑ ุฏุฑ ุฏุชุงุจุณ
